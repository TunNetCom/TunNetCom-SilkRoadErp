@using Radzen
@using Radzen.Blazor
@using Microsoft.Extensions.Localization
@using TunNetCom.SilkRoadErp.Sales.WebApp.Locales
@inject DialogService DialogService
@inject IStringLocalizer<SharedResource> Localizer

<RadzenStack Orientation="Radzen.Orientation.Vertical" Gap="1rem">
    <RadzenText TextStyle="TextStyle.H6">
        Sélectionner les colonnes à afficher
    </RadzenText>
    
    <RadzenStack Orientation="Radzen.Orientation.Vertical" Gap="0.5rem" Style="max-height: 400px; overflow-y: auto;">
        @foreach (var column in AvailableColumns)
        {
            <RadzenStack Orientation="Radzen.Orientation.Horizontal" Gap="0.5rem" Style="align-items: center;">
                <RadzenCheckBox @bind-Value="column.IsVisible" 
                              Name="@column.PropertyName" />
                <RadzenText TextStyle="TextStyle.Body1">
                    @column.DisplayName
                </RadzenText>
            </RadzenStack>
        }
    </RadzenStack>

    <RadzenStack Orientation="Radzen.Orientation.Horizontal" Gap="0.5rem" JustifyContent="JustifyContent.End" Style="margin-top: 1rem;">
        <RadzenButton Text="@Localizer["Cancel"]" 
                      ButtonStyle="ButtonStyle.Light" 
                      Click="@(() => DialogService.Close(false))" />
        <RadzenButton Text="@Localizer["apply"]" 
                      ButtonStyle="ButtonStyle.Primary" 
                      Click="@OnConfirm" />
    </RadzenStack>
</RadzenStack>

@code {
    [Parameter] public List<ColumnInfo> AvailableColumns { get; set; } = new();

    private void OnConfirm()
    {
        DialogService.Close(AvailableColumns);
    }
}

