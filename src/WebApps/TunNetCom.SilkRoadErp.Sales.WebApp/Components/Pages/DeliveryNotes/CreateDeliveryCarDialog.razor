@using Radzen
@using Radzen.Blazor
@using Microsoft.Extensions.Localization
@using TunNetCom.SilkRoadErp.Sales.WebApp.Locales
@using TunNetCom.SilkRoadErp.Sales.WebApp.Components.Pages.DeliveryNotes
@inject DialogService DialogService
@inject IStringLocalizer<SharedResource> Localizer

<RadzenStack Orientation="Radzen.Orientation.Vertical" Gap="1rem">
    <RadzenText TextStyle="TextStyle.Body1">
        @Localizer["Add_Delivery_Car"]
    </RadzenText>
    
    <RadzenStack Orientation="Radzen.Orientation.Vertical" Gap="0.5rem">
        <RadzenLabel Text="@($"{Localizer["Matricule"]} *")" />
        <RadzenTextBox @bind-Value="Matricule" 
                      Placeholder="@Localizer["Matricule_Placeholder"]" 
                      MaxLength="50"
                      Style="width: 100%;" />
    </RadzenStack>

    <RadzenStack Orientation="Radzen.Orientation.Vertical" Gap="0.5rem">
        <RadzenLabel Text="@($"{Localizer["Owner"]} *")" />
        <RadzenTextBox @bind-Value="Owner" 
                      Placeholder="@Localizer["Owner_Placeholder"]" 
                      MaxLength="100"
                      Style="width: 100%;" />
    </RadzenStack>

    <RadzenStack Orientation="Radzen.Orientation.Horizontal" Gap="0.5rem" JustifyContent="JustifyContent.End" Style="margin-top: 1rem;">
        <RadzenButton Text="@Localizer["Cancel"]" 
                      ButtonStyle="ButtonStyle.Light" 
                      Click="@(() => DialogService.Close(false))" />
        <RadzenButton Text="@Localizer["yes"]" 
                      ButtonStyle="ButtonStyle.Success" 
                      Click="@OnConfirm"
                      Disabled="@(string.IsNullOrWhiteSpace(Matricule) || string.IsNullOrWhiteSpace(Owner))" />
    </RadzenStack>
</RadzenStack>

@code {
    private string Matricule { get; set; } = string.Empty;
    private string Owner { get; set; } = string.Empty;

    private void OnConfirm()
    {
        if (string.IsNullOrWhiteSpace(Matricule) || string.IsNullOrWhiteSpace(Owner))
        {
            return;
        }

        var result = new CreateDeliveryCarDialogResult
        {
            Matricule = Matricule,
            Owner = Owner
        };

        DialogService.Close(result);
    }
}
